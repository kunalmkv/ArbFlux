<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #34495e; }
      .label { font-family: Arial, sans-serif; font-size: 11px; font-weight: bold; fill: #2c3e50; }
      .process { font-family: Arial, sans-serif; font-size: 10px; fill: #ffffff; }
      .decision { font-family: Arial, sans-serif; font-size: 10px; fill: #2c3e50; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .success-flow { stroke: #27ae60; stroke-width: 2; fill: none; marker-end: url(#success-arrow); }
      .failure-flow { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#failure-arrow); }
      .data-flow { stroke: #3498db; stroke-width: 2; fill: none; marker-end: url(#data-arrow); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
    <marker id="success-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60" />
    </marker>
    <marker id="failure-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
    <marker id="data-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1000" fill="#ecf0f1"/>
  
  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title">DeFi Arbitrage Bot - Process Flow</text>
  
  <!-- Start -->
  <ellipse cx="700" cy="80" rx="60" ry="30" fill="#27ae60"/>
  <text x="700" y="85" text-anchor="middle" class="process">Start Bot</text>
  
  <!-- Initialize Components -->
  <rect x="600" y="140" width="200" height="40" fill="#3498db" rx="5"/>
  <text x="700" y="165" text-anchor="middle" class="process">Initialize Components</text>
  
  <!-- Connect to Blockchain -->
  <rect x="600" y="200" width="200" height="40" fill="#3498db" rx="5"/>
  <text x="700" y="225" text-anchor="middle" class="process">Connect to Blockchain</text>
  
  <!-- Start Price Monitoring -->
  <rect x="600" y="260" width="200" height="40" fill="#3498db" rx="5"/>
  <text x="700" y="285" text-anchor="middle" class="process">Start Price Monitoring</text>
  
  <!-- Scan for Opportunities -->
  <rect x="600" y="320" width="200" height="40" fill="#f39c12" rx="5"/>
  <text x="700" y="345" text-anchor="middle" class="process">Scan for Opportunities</text>
  
  <!-- Detect Arbitrage Decision -->
  <polygon points="700,400 650,440 700,480 750,440" fill="#e74c3c"/>
  <text x="700" y="445" text-anchor="middle" class="decision">Detect</text>
  <text x="700" y="455" text-anchor="middle" class="decision">Arbitrage?</text>
  
  <!-- Wait for Next Scan -->
  <rect x="50" y="420" width="150" height="40" fill="#95a5a6" rx="5"/>
  <text x="125" y="445" text-anchor="middle" class="process">Wait for Next</text>
  <text x="125" y="455" text-anchor="middle" class="process">Scan</text>
  
  <!-- Analyze Opportunity -->
  <rect x="600" y="500" width="200" height="40" fill="#9b59b6" rx="5"/>
  <text x="700" y="525" text-anchor="middle" class="process">Analyze Opportunity</text>
  
  <!-- Calculate Profit -->
  <rect x="600" y="560" width="200" height="40" fill="#9b59b6" rx="5"/>
  <text x="700" y="585" text-anchor="middle" class="process">Calculate Profit</text>
  
  <!-- Risk Assessment -->
  <rect x="600" y="620" width="200" height="40" fill="#9b59b6" rx="5"/>
  <text x="700" y="645" text-anchor="middle" class="process">Risk Assessment</text>
  
  <!-- Profitable Decision -->
  <polygon points="700,680 650,720 700,760 750,720" fill="#e74c3c"/>
  <text x="700" y="725" text-anchor="middle" class="decision">Profitable?</text>
  
  <!-- Reject Opportunity -->
  <rect x="50" y="700" width="150" height="40" fill="#e74c3c" rx="5"/>
  <text x="125" y="725" text-anchor="middle" class="process">Reject</text>
  <text x="125" y="735" text-anchor="middle" class="process">Opportunity</text>
  
  <!-- Qualify Opportunity -->
  <rect x="600" y="780" width="200" height="40" fill="#27ae60" rx="5"/>
  <text x="700" y="805" text-anchor="middle" class="process">Qualify Opportunity</text>
  
  <!-- Execute Trade -->
  <rect x="600" y="840" width="200" height="40" fill="#27ae60" rx="5"/>
  <text x="700" y="865" text-anchor="middle" class="process">Execute Trade</text>
  
  <!-- Store Results -->
  <rect x="600" y="900" width="200" height="40" fill="#27ae60" rx="5"/>
  <text x="700" y="925" text-anchor="middle" class="process">Store Results</text>
  
  <!-- Log Transaction -->
  <rect x="600" y="960" width="200" height="40" fill="#27ae60" rx="5"/>
  <text x="700" y="985" text-anchor="middle" class="process">Log Transaction</text>
  
  <!-- Stop Bot Decision -->
  <polygon points="700,1020 650,1060 700,1100 750,1060" fill="#e74c3c"/>
  <text x="700" y="1065" text-anchor="middle" class="decision">Stop Bot?</text>
  
  <!-- Cleanup Resources -->
  <rect x="600" y="1120" width="200" height="40" fill="#e67e22" rx="5"/>
  <text x="700" y="1145" text-anchor="middle" class="process">Cleanup Resources</text>
  
  <!-- End -->
  <ellipse cx="700" cy="1180" rx="60" ry="30" fill="#e74c3c"/>
  <text x="700" y="1185" text-anchor="middle" class="process">End</text>
  
  <!-- Flow Arrows -->
  <!-- Main Flow -->
  <line x1="700" y1="110" x2="700" y2="140" class="arrow"/>
  <line x1="700" y1="180" x2="700" y2="200" class="arrow"/>
  <line x1="700" y1="240" x2="700" y2="260" class="arrow"/>
  <line x1="700" y1="300" x2="700" y2="320" class="arrow"/>
  <line x1="700" y1="360" x2="700" y2="400" class="arrow"/>
  <line x1="700" y1="480" x2="700" y2="500" class="arrow"/>
  <line x1="700" y1="540" x2="700" y2="560" class="arrow"/>
  <line x1="700" y1="600" x2="700" y2="620" class="arrow"/>
  <line x1="700" y1="660" x2="700" y2="680" class="arrow"/>
  <line x1="700" y1="760" x2="700" y2="780" class="arrow"/>
  <line x1="700" y1="820" x2="700" y2="840" class="arrow"/>
  <line x1="700" y1="880" x2="700" y2="900" class="arrow"/>
  <line x1="700" y1="940" x2="700" y2="960" class="arrow"/>
  <line x1="700" y1="1000" x2="700" y2="1020" class="arrow"/>
  <line x1="700" y1="1100" x2="700" y2="1120" class="arrow"/>
  <line x1="700" y1="1160" x2="700" y2="1180" class="arrow"/>
  
  <!-- Decision Flows -->
  <!-- No Arbitrage -->
  <line x1="650" y1="440" x2="200" y2="440" class="failure-flow"/>
  <line x1="200" y1="440" x2="200" y2="420" class="failure-flow"/>
  
  <!-- Not Profitable -->
  <line x1="650" y1="720" x2="200" y2="720" class="failure-flow"/>
  <line x1="200" y1="720" x2="200" y2="700" class="failure-flow"/>
  
  <!-- Continue Scanning -->
  <line x1="125" y1="460" x2="125" y2="320" class="data-flow"/>
  <line x1="125" y1="320" x2="500" y2="320" class="data-flow"/>
  
  <!-- Reject to Wait -->
  <line x1="125" y1="740" x2="125" y2="460" class="failure-flow"/>
  
  <!-- Stop Bot -->
  <line x1="750" y1="1060" x2="600" y2="1060" class="failure-flow"/>
  <line x1="600" y1="1060" x2="600" y2="1120" class="failure-flow"/>
  
  <!-- Continue -->
  <line x1="750" y1="1060" x2="500" y2="1060" class="success-flow"/>
  <line x1="500" y1="1060" x2="500" y2="320" class="success-flow"/>
  
  <!-- Detailed Process Boxes -->
  <!-- Price Monitoring Details -->
  <rect x="900" y="200" width="300" height="120" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="1050" y="225" text-anchor="middle" class="subtitle">Price Monitoring</text>
  <text x="920" y="250" class="label">• Block-level price updates</text>
  <text x="920" y="265" class="label">• Multi-DEX price fetching</text>
  <text x="920" y="280" class="label">• MEV protection</text>
  <text x="920" y="295" class="label">• Price cache management</text>
  <text x="920" y="310" class="label">• Real-time notifications</text>
  
  <!-- Opportunity Analysis Details -->
  <rect x="900" y="400" width="300" height="120" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="1050" y="425" text-anchor="middle" class="subtitle">Opportunity Analysis</text>
  <text x="920" y="450" class="label">• Direct arbitrage detection</text>
  <text x="920" y="465" class="label">• Triangular arbitrage</text>
  <text x="920" y="480" class="label">• Price difference calculation</text>
  <text x="920" y="495" class="label">• Gas cost estimation</text>
  <text x="920" y="510" class="label">• Profit margin analysis</text>
  
  <!-- Risk Assessment Details -->
  <rect x="900" y="600" width="300" height="120" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="1050" y="625" text-anchor="middle" class="subtitle">Risk Assessment</text>
  <text x="920" y="650" class="label">• Liquidity checks</text>
  <text x="920" y="665" class="label">• Price impact analysis</text>
  <text x="920" y="680" class="label">• Portfolio exposure</text>
  <text x="920" y="695" class="label">• Daily loss limits</text>
  <text x="920" y="710" class="label">• Position sizing (Kelly)</text>
  
  <!-- Execution Details -->
  <rect x="900" y="800" width="300" height="120" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="1050" y="825" text-anchor="middle" class="subtitle">Trade Execution</text>
  <text x="920" y="850" class="label">• Transaction preparation</text>
  <text x="920" y="865" class="label">• Gas optimization</text>
  <text x="920" y="880" class="label">• MEV protection</text>
  <text x="920" y="895" class="label">• Slippage protection</text>
  <text x="920" y="910" class="label">• Confirmation monitoring</text>
  
  <!-- Legend -->
  <rect x="50" y="50" width="200" height="120" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="150" y="75" text-anchor="middle" class="subtitle">Legend</text>
  
  <line x1="70" y1="90" x2="100" y2="90" class="success-flow"/>
  <text x="110" y="95" class="label">Success Flow</text>
  
  <line x1="70" y1="110" x2="100" y2="110" class="failure-flow"/>
  <text x="110" y="115" class="label">Failure Flow</text>
  
  <line x1="70" y1="130" x2="100" y2="130" class="data-flow"/>
  <text x="110" y="135" class="label">Data Flow</text>
  
  <line x1="70" y1="150" x2="100" y2="150" class="arrow"/>
  <text x="110" y="155" class="label">General Flow</text>
  
  <rect x="70" y="170" width="20" height="15" fill="#27ae60" rx="2"/>
  <text x="100" y="182" class="label">Success Process</text>
  
  <rect x="70" y="190" width="20" height="15" fill="#e74c3c" rx="2"/>
  <text x="100" y="202" class="label">Decision Point</text>
</svg>
